---
name: batch-text-replace
description: 批量替换文件内容，支持多文件同时替换，支持正则表达式，适用于批量修改代码变量名、更新文档版本号等。
compatibility: 支持 Windows/macOS/Linux，依赖 Python 3.6+，需文件系统读写权限。
metadata:
  version: "1.0"
  author: "Custom AI Agent"
  update_time: "2025-12-23"
---

# 批量内容替换技能
## 适用场景
当需要批量修改多个文件中的文本内容时使用，例如：
- 将项目代码中的 `old_api_url` 替换为 `new_api_url`；
- 更新所有 Markdown 文档中的版权年份 "2023" -> "2024"；
- 批量修正文档中的错别字。

## 核心参数（用户需提供）
1. `search_path`：必填，需替换文件所在的根目录；
2. `old_text`：必填，需要被替换的旧文本（或正则表达式）；
3. `new_text`：必填，替换后的新文本；
4. `file_filter`：可选，文件类型筛选（如 ".py,.md"）；
5. `is_regex`：可选，是否将 `old_text` 视为正则表达式（默认 False）。

## 执行步骤
1. 校验用户输入：确认 `search_path` 存在且有读写权限；
2. 遍历目录下符合 `file_filter` 的文件；
3. 逐个处理文件：
   - 读取文件内容；
   - 检查是否包含 `old_text`；
   - 若包含：
     - 执行替换操作；
     - 写入新内容回文件；
     - 记录修改的文件路径和替换次数；
4. 返回执行报告：成功修改的文件数量、替换总次数、失败列表。

## 注意事项
1. **高风险操作**：执行前必须建议用户备份文件；
2. 替换操作不可逆，务必确认替换规则准确；
3. 自动跳过二进制文件和只读文件。
