---
name: batch-file-move
description: 批量移动指定文件夹内的文件到目标路径，支持按文件类型/名称筛选，自动处理重复文件，适用于文件分类、归档场景。
compatibility: 支持 Windows/macOS/Linux，依赖 Python 3.6+，需文件系统读写权限。
metadata:
  version: "1.0"
  author: "Custom AI Agent"
  update_time: "2025-12-23"
---

# 批量移动文件技能
## 适用场景
当需要将文件按规则分类移动到指定文件夹时使用，例如：
- 将桌面所有PDF文件移动到“文档/PDF”文件夹；
- 将2024年的照片移动到“相册/2024”文件夹；
- 将日志文件按日期移动到对应的归档文件夹。

## 核心参数（用户需提供）
1. `source_path`：必填，待移动文件所在的源文件夹路径；
2. `target_path`：必填，文件移动的目标文件夹路径；
3. `file_filter`：可选，文件筛选规则：
   - 按类型：如 ".pdf,.txt"（多个类型用逗号分隔）；
   - 按名称：如 "2024_"（包含指定文本）；
   - 留空则移动所有文件；
4. `move_subfolders`：可选，是否移动子文件夹（默认 False，仅移动文件）；
5. `duplicate_strategy`：可选，重复文件处理策略（默认 "rename"）：
   - `rename`：重命名目标文件（添加 "-副本" 后缀）；
   - `overwrite`：覆盖目标文件；
   - `skip`：跳过重复文件。

## 执行步骤
1. 校验用户输入：确认 `source_path` 存在，`target_path` 可访问（不存在则自动创建）；
2. 列出源文件夹内符合 `file_filter` 的文件（根据 `move_subfolders` 决定是否包含子文件夹）；
3. 预处理目标文件夹：若不存在则创建，确保有写入权限；
4. 逐个移动文件：
   - 拼接目标文件路径 = 目标文件夹 + 原文件名；
   - 若目标文件已存在：按 `duplicate_strategy` 处理；
   - 执行移动操作（使用剪切-粘贴，而非复制-删除，提升效率）；
5. 记录移动结果：成功数量、失败文件（含原因）、重复文件处理方式；
6. 返回执行报告：包含所有操作细节，便于追溯。

## 注意事项
1. 移动前展示预览列表，需用户确认后再执行；
2. 跳过系统隐藏文件、无权限文件、正在被占用的文件；
3. 移动失败时自动回滚（如部分文件移动成功后出错，恢复原位置）；
4. 不移动源文件夹本身，仅移动内部文件/子文件夹；
5. 跨磁盘移动时（如C盘→D盘），自动切换为“复制+删除”逻辑（兼容系统限制）。